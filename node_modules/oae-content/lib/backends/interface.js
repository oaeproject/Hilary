/*!
 * Copyright 2012 Sakai Foundation (SF) Licensed under the
 * Educational Community License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License. You may
 * obtain a copy of the License at
 *
 *     http://www.osedu.org/licenses/ECL-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an "AS IS"
 * BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */

/**
 * The interface that each Storage Backend should implement.
 */

/**
 * Stores a file body on the storage backend.
 * This method will return a uri that can be used to retrieve the file body.
 * It's up to the caller to store this uri approriately.
 *
 * @param {Context}     ctx             The current execution context.
 * @param {Stream}      stream          The file body that needs to be stored. This stream will have to be resumed by the backend.
 * @param {Object}      opts            Some storage backends require extra options. If possible you should pass in an object with the following keys: `type` holds the file mimetype, `size` the size of the file in bytes and `filename`, the original name of the file.
 * @param {Function}    callback        A callback method
 * @param {Object}      callback.err    An error object (if any)
 * @param {String}      callback.uri    A URI that can be used to retrieve the filebody.
 */
var store = module.exports.store = function(ctx, stream, opts, callback) {};

/**
 * Delete a file body.
 *
 * @param {Context}     ctx                 The current execution context.
 * @param {String}      uri                 A URI that identifies the filebody.
 * @param {Function}    [callback]          An optional callback method
 * @param {Object}      callback.err        An error object (if any)

 */
var remove = module.exports.remove = function(ctx, uri, callback) {};

/**
 * In case the storage backend is not hosted on this app server,
 * the user will need to be redirected to a URL that gets generated by this method.
 *
 * @param   {Context}     ctx                   The current execution context.
 * @param   {Content}     uri                   A URI that identifies the filebody.
 * @returns {Object}                            An object that holds a `code` key and a `url` key. If the code is `200` it's assumed that this should be an X-Accel-Redirect via nginx, if it's a 301 the provided url is a complete url to an outside source.
 */
var getDownloadLink = module.exports.getDownloadLink = function(ctx, uri) {};